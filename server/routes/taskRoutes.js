const express = require('express')
const router = express.Router()
const auth = require('../middleware/auth')
const taskController = require('../controllers/taskController')

router.post('/', auth, taskController.createTask)
router.get('/today', auth, taskController.getTodayTasks)
router.get('/challenge', auth, taskController.getChallengeTasks)
router.post('/challenge/:id/accept', auth, taskController.acceptChallengeTask)
router.post('/:id/accept', auth, taskController.acceptTask)
router.get('/mission', auth, taskController.getMissionTasks)
router.get('/collab', auth, taskController.getCollabTasks)
router.get('/archive', auth, taskController.getArchivedTasks)
if (process.env.NODE_ENV !== 'production') {
  router.get('/debug', auth, taskController.getTaskDebug)
  router.post('/debug', auth, taskController.setTaskDebug)
}
router.get('/', auth, taskController.getAllTasks)
router.get('/:id', auth, taskController.getTask)
router.patch('/:id/progress', auth, taskController.updateProgress)
router.patch('/:id/review', auth, taskController.submitReview)
router.patch('/:id/review/continue', auth, taskController.continueReview)
router.patch('/:id/complete', auth, taskController.completeTask)
router.patch('/:id/abandon', auth, taskController.abandonTask)
router.patch('/:id/close', auth, taskController.closeTask)
router.patch('/:id/restart', auth, taskController.restartTask)
router.patch('/:id/refresh', auth, taskController.refreshTaskSchedule)
router.delete('/:id', auth, taskController.deleteTask)
router.post('/:id/rework', auth, taskController.reworkTask)
router.post('/:id/rework/accept', auth, taskController.acceptReworkTask)
router.post('/:id/rework/reject', auth, taskController.rejectReworkTask)
router.post('/:id/rework/cancel', auth, taskController.cancelReworkTask)

module.exports = router
